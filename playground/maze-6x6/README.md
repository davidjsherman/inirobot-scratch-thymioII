# Generate an Enki playground from an Inkscape SVG

This is a quick and dirty program to convert an SVG image into an Enki playground for Thymio IIs. The size of the image and the positions of the robots is hardwired. The program only handles some kinds of <path> elements, specifically those encountered in SVG files generated by Inkscape. Only paths from a layer named _“Walls”_ in the SVG file are converted to walls in the playground. Diagonal walls use the _angle_ attribute of playground file _wall_ elements, added in commit [5bf4584](https://github.com/davidjsherman/aseba/commit/5bf45848ea7ef09decb5b3712637baa69d246ad8) of  [davidjsherman/aseba](https://github.com/davidjsherman/aseba).

## Building a playground
1. Edit the SVG image. Put walls in the _Walls_ layer. Draw the ground texture in any other layers.
1. Save the image as an _Inkscape SVG file_, `maze.svg`.
1. Save a copy of the image as a _PNG_ file, `maze.png`. Flip the image vertically, for example with ImageMagick use `mogrify -flip maze.png`.
1. If you want doors, write the XML fragment and save it as `maze.door.xml`.
1. Run `perl svg-path-split.perl maze`.

Check the PNG file `maze.check.png` to make sure that the walls are draw where you expect them. Check the log file `maze.log` in case of trouble.

Load the resulting `maze.playground` file into _asebaplayground_. Its accompanying `maze.png` ground texture must be in the same directory. Two Thymio II robots will be added, listening on ports 33333 and 33334. You can run two Aseba Studios, or combine them with an asebaswitch and run one Studio for them both.

## Using the playground
The 6x6 maze in this directory is designed to help test navigation strategies. The walls can be avoided using the proximity sensors. The large cul-de-sacs should permit a robot to escape using simple wall avoidance. The tracks on the ground can be followed with ground sensors. The loops in the wide green track can be followed to turn around. The arrows on the narrow track should help the robot find the track if it gets lost. The colored tracks are dark enough to be seen by the proximity sensors with values around 160–180, but no so dark that they will trigger table edge detection.

Success is when a robot finds the blue center region and stops on the black band. Additionally this will open the blue door and allow the second robot to escape, to test a different strategy or simply for a victory dance.

One simple success story is to run the standard [Investigator](https://www.thymio.org/en:thymiobehaviourinvestigator) behavior (cyan) on the robot in the top right corner, target _tcp:;port=33334_, and run the standard [Explorer](https://www.thymio.org/en:thymiobehaviourexplorer) behavior (yellow) on the bottommost robot, target _tcp:;port=33333_. The explorer will succeed and stop on the black band, opening the door for the investigator, who will run victory laps around the green track.
